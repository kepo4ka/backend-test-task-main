### Класс JsonResponse 
`Controller/JsonResponse.php`
- Некорректное расположение в папке `Controller`. 
  - Перенести в отдельную папку `Utils/Http/JsonResponse.php`.
- Класс не реализует логику для работы с `json`.
  - Добавить логику для работы с `json`, включая кодирование данных и заголовок `Content-Type: application/json`. 
  - Добавить выброс исключения, если не удалось закодировать
  - Параметры `JSON_PRETTY_PRINT | JSON_UNESCAPED_SLASHES` при кодировании выглядят излишними, возможно стоит оставить только для `dev` окружения для удобного дебага
  - В тех местах, где класс используется, обновить в сответствии с новой логикой.
  
### Класс Product 
`Repository/Entity/Product.php`
- Некорректное расположение в папке `Repository`, т.к. `Product` является бизнес-сущностью и поэтому должен быть в `Domain`.
- Не хватает модификатора `final` к определению класса.
- Не учитывается то, что параметры `thumbnail` и `description` могут иметь значение `null` (согласно схеме БД).

### Класс Cart
*Domain/Cart.php*
- В методе `addItem` не учитывается, что может добавляться несколько штук одного товара.
- Можно сразу реализовать методы для удаления/уменьшения, т.к. это явно понадобится в будущем.
- Можно вынести в подпапку `Domain/Cart/`.
- Возможно параметр `Customer` должен быть опциональным, если допускается добавление в корзину без авторизации.
- Возможно параметр `PaymentMethod` должен быть опциональным, если допускается добавление в корзину без необходимости заранее выбирать способ оплаты.

### Класс CartItem
*Domain/CartItem.php*
- Модификаторы доступа к параметрам конструктора публичные.
- Модификатор `readonly` для поля `quantity` не подходит, т.к. значение может изменяться.
- Можно вынести в подпапку `Domain/Cart/`.
- Добавить метод `setQuantity`.

## Взаимодействие с Redis
### Класс Connector
`Infrastructure/Connector.php`
- Класс напрямую зависит от классов `Redis` и `Cart`.
- В конструкторе не указаны модификатор и тип переменной `$redis`.
- Хочется, чтобы при генерации исключения в сообщении также было отображено, при какой операции случилась ошибка (`get`, `set`, `has`,).
- В методе `set` добавить 3 параметр `$ttl = 0` для возможности динамически задавать время жизни.

### Класс ConnectorFacade
`Infrastructure/ConnectorFacade.php`
- Класс зависит от класса `Redis`.
- У свойств модификаторы `public` без необходимости.
- У свойства `$connector` не указан тип `Connector`.
- В методе `build` вызовы `auth` и `select` должны быть внутри try catch.
- Внутри блока `catch` ничего не происходит.

## Рефакторинг взаимодействия с Redis
Классы `Connector` и `ConnectorFacade` зависят от `Redis` и `Cart`.
Вместо этих классов добавить:
- `StorageInterface` с необходимыми методами (`get`, `set`, `has` и т.д.).
- Класс `RedisStorage` (наследуется от `StorageInterface`).
Улучшения:
- Можем заменить `RedisStorage` на другое хранилище (например, `Memcached`).
- `Storage` не зависит от `Cart` и через него теперь можно работать с любыми объектами, а не только с `Cart`.

### Класс ConnectorException
*Infrastructure/ConnectorException.php*
- Не хватает модификатора `final`.
- Переименовать в `StorageException`.

### Класс CartManager
*Repository/CartManager.php*
- Класс зависит от данных, которые необходимы для подключения `Redis` - `$host, $port, $password`.
- Класс зависит от класса `Connector`, а не от интерфейса.
  - Внедрить зависимость через `StorageInterface`.
- Мало информации при логировании исключений.
- Не указан тип для поля `$logger`.
- У методов не указаны возвращаемые типы.
- `saveCart` - непонятный phpDoc.
- `getCart` - в phpDoc некорректно указано, что из функции может вернуться null.  
- `getCart` - Некорректные параметры для создания объекта `Cart`. 

### Класс ProductRepository
*Repository/ProductRepository.php*
- Не хватает абстракного класса `Repository`, в который можно вынести конструктор.
- Методы `getByUuid`, `getByCategory` уязвимы к sql-инъекциям, необходимо использовать подготовленные выражения.
- В методе `getByCategory` слово `static` избыточно перед стрелочной функцией.
- Не хватает метода получения списка продуктов по набору `uuid`.

- ### Класс ProductView
*View/ProductView.php*
- Не хватает `declare(strict_types = 1)`.
- Не хватает модификатора `final`.
- Не хочется отдавать идентификатор (`id`) продукта.

### Класс CartView
*View/CartView.php*
- Не хватает модификатора `final`.
- При получении продуктов, связанных с элементами корзины, в цикле делается много запросов вместо одного.
- Не хочется передавать идентификатор (`id`) клиента и продукта.

### Класс GetProductsController
*Controller/GetProductsController.php*
- Не хватает модификатора `readonly`.
- Не хватает проверки наличия параметра `$rawRequest['category']`.

### Класс GetCartController
*Controller/GetCartController.php*
- Не хватает проверки наличия параметра `$rawRequest['category']`.
- Модификаторы параметров - `public`.

### Класс AddToCartController
*Controller/AddToCartController.php*
- Не хватает проверки наличия параметров `productUuid`, `quantity`.
- Нет проверки наличия продукта в БД.
- После добавление элемента в корзину не происходит сохранения в хранилище.

